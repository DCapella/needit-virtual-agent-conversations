<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__c58b5beef7fe3300a24b7059865c360a">c18b5bee4ffe330072e34f00a310c70b</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"46c1c03830c8418d962d40a0c15534a2","triggerType":"request","id":"46c1c03830c8418d962d40a0c15534a2"}],"goals":[{"name":"primary","trigger_id":"46c1c03830c8418d962d40a0c15534a2","nodes":[{"type":"StartGoal","goal_id":"f2239226139844a48e40acdda3ec007e","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"9c5fd6a930d842e3938d99b55b669f54","name":"Start"},{"type":"TerminateGoal","goal_id":"f2239226139844a48e40acdda3ec007e","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"6c0e6fa231dd492ca595e729810a9980","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"7d66b794fe5740bdb50b20f699cadb5c","name":"NeedIt Type","goal_id":"f2239226139844a48e40acdda3ec007e","variable_id":"db148f0ae0ff4f82b7d3d756028c3096","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"3bcc4fe9032840a49ead63d16389a5ff","name":"NeedIt List","goal_id":"f2239226139844a48e40acdda3ec007e","variable_id":"7096069abd7b48d3b541c449fe7dafd0","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view."},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n    /* Code your GlideRecord query logic here. For example:\n    \n        var options = [];\n        var gr = new GlideRecord(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n\n    var options = [];\n    var grT = new GlideRecord(table)\n    grT.addQuery('u_request_type',vaInputs.needit_type.getValue());\n    grT.addQuery('active','true');\n    grT.addQuery('u_requested_for',vaInputs.user);\n    grT.query();\n\n    while(grT.next()) {\n            options.push({\n                'value': grT.getUniqueValue(),\n                'label': grT.getValue('number') + \": \" + grT.getValue('short_description'),\n            });\n    }\n    return options;\n})(table)\n\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    /* Code your GlideRecord query logic here. For example:\n    \n        var options = [];\n        var gr = new GlideRecord(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n\n    var options = [];\n    var grT = new GlideRecord(table)\n    grT.addQuery('u_request_type',vaInputs.needit_type.getValue());\n    grT.addQuery('active','true');\n    grT.addQuery('u_requested_for',vaInputs.user);\n    grT.query();\n\n    while(grT.next()) {\n            options.push({\n                'value': grT.getUniqueValue(),\n                'label': grT.getValue('number') + \": \" + grT.getValue('short_description'),\n            });\n    }\n    return options;\n})(table)\n\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"7096069abd7b48d3b541c449fe7dafd0","fields":["priority","short_description","u_when_needed"],"id":"b08f224f8d514eed84358ab89efd4ec2","name":"NeedIt Card","goal_id":"f2239226139844a48e40acdda3ec007e","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"b22df4e5bafd4282b93ae10f3409500e","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"4192299b76df475cb82ebc377873183a","name":"Search Again","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"aba7f675359847648cd2847cec918cfb","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"75da608b23b948b685048318e1e63a8c","name":"Yes"}],"id":"7f89394ff793434eba00a43959c032dd","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"InputPrompt","variable_id":"fdca89c7989f4a3ab854f54d90d82400","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"0dde6ec0fe38464e8412324598ede70b","name":"New When Needed Date","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"7096069abd7b48d3b541c449fe7dafd0","id":"13122e8165d1493fab7a2684c226429b","name":"Change When needed Date","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"7096069abd7b48d3b541c449fe7dafd0","fields":["u_when_needed","short_description","priority"],"id":"7de15885b47e42c08c61846dadc5d855","name":"Updated needIt","goal_id":"f2239226139844a48e40acdda3ec007e","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"406a7d46d71c4c09a5fc659def14c375","name":"What to Update","goal_id":"f2239226139844a48e40acdda3ec007e","variable_id":"11f5da82058d4bf4ab86a0e3cb4ebc1e","message":{"type":"String","mode":"string","value":"Which field to update?"},"optional":false},{"type":"Decision","name":"Update what","branches":[{"type":"Branch","label":"When needed","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when_needed"},"id":"869deef8585b43b383ef4ea8e4c777d3","name":"When needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"ddf855d5d9754f0682ab770d075bebf3","name":"Nothing"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short_description"},"id":"2d63d46f56104767927f1325b4864f76","name":"Short description"}],"id":"dde8c95e9218412bbb1ac3185ea3d2c2","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"InputPrompt","variable_id":"aa1899d79eb24796997eeca55132072c","message":{"type":"String","mode":"string","value":"What do you want the Short Description to be?"},"optional":false,"id":"67057a9a56864f77acf9f65850ec7f03","name":"New Short Description","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"7096069abd7b48d3b541c449fe7dafd0","id":"acdd2db75a2a470b8f49f45c4605b074","name":"Change Short description","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"8bcc5516b896460db07500ed2fdf640f","name":"Confirm NeedIt Type Script","goal_id":"f2239226139844a48e40acdda3ec007e","value":{"type":"String","mode":"string","value":"(function execute() {\n      /*************************************************************** \n       YOU CAN OUTPUT A SinglePartOutMsg (see full API for sn_cs.SinglePartOutMsg), \n       LIKE THIS:\n       \n       var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart('text part');\n       return singleOutMsg;\n      ****************************************************************/ \n          \n      /*************************************************************** \n       OR YOU CAN OUTPUT A MultiPartOutMsg (see full API for sn_cs.MultiPartOutMsg),\n       LIKE THIS:\n       \n       var multiOutMsg = new sn_cs.MultiPartOutMsg();\n       multiOutMsg.setNavigationLabel('Click for More');\n       multiOutMsg.addPlainTextPart('text part 1');\n       multiOutMsg.addPlainTextPart('text part 2');\n       return multiOutMsg;\n      ****************************************************************/\n      \n      /***************************************************************\n       * NOTE: You can include conditional logic when building the \n       * output content. For example, if constructing a sn_cs.MultiPartOutMsg \n       * then you might want to add 3 parts under condition (A) but 7 parts \n       * under condition (B).\n       *\n       * HOWEVER, do NOT include conditional logic that varies the output TYPE.\n       * That is, do NOT include a condition that might return either a\n       * sn_cs.SinglePartOutMsg under condition (A) but returns a \n       * sn_cs.MultiPartOutMsg under condition (B).\n       ****************************************************************/\n       var displayValue = vaInputs.needit_type.getDisplayValue();\n       var actualValue = vaInputs.needit_type.getValue();\n       return \"You selected: \" + displayValue + \" (\" + actualValue + \")\";\n})()\n"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a \n       record based on conditional logic:\n    \n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.search_count++;\n})()\n","id":"14f3f21ad4564309ba281041be212490","name":"Update search_count","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"Decision","name":"To Live Agent or Not to Live Agent","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.search_count &lt; 3;\n})()\n"},"id":"1d2005b87a9941e294eaad3cbce0dc5f","name":"Less than 3"},{"type":"Branch","label":"3 or greater","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.search_count &gt;= 3;\n})()\n"},"id":"21ca456c91ca481c90e42c55020a5b65","name":"3 or greater"}],"id":"3e4bf549c90946719e1ebf7efa4a0afb","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    if (vaSystem.isLiveAgentAvailable()) {\n        return \"You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.\";\n    } else {\n        return \"You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.\";\n    }\n})()\n"},"id":"8b2800a1a5f542f18399960b68a63941","name":"Quota Reached","goal_id":"f2239226139844a48e40acdda3ec007e"},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a \n       record based on conditional logic:\n    \n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaSystem.connectToAgent();\n})()\n","id":"460af881fb7243f3b6b030a99962f240","name":"Transfer to Agent","goal_id":"f2239226139844a48e40acdda3ec007e","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run \n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n    */\n    return vaSystem.isLiveAgentAvailable();\n})()\n"}}],"edges":[{"type":"Edge","source_node_id":"3bcc4fe9032840a49ead63d16389a5ff","target_node_id":"b08f224f8d514eed84358ab89efd4ec2","id":"5be1b241b92e429090f1b55beb615d63"},{"type":"Edge","source_node_id":"8bcc5516b896460db07500ed2fdf640f","target_node_id":"3bcc4fe9032840a49ead63d16389a5ff","id":"39ea2071c2454672b145ea51699ac082"},{"type":"Edge","source_node_id":"9c5fd6a930d842e3938d99b55b669f54","target_node_id":"7d66b794fe5740bdb50b20f699cadb5c","id":"80eae070df8042028201bbb990d55135"},{"type":"Edge","source_node_id":"4192299b76df475cb82ebc377873183a","target_node_id":"7f89394ff793434eba00a43959c032dd","id":"8487a1a7fe104f64a771488eba8cc340"},{"type":"Edge","source_node_id":"7f89394ff793434eba00a43959c032dd","target_node_id":"6c0e6fa231dd492ca595e729810a9980","branch_id":"aba7f675359847648cd2847cec918cfb","id":"ceaa1fd8c0ec40629a82de780699b83b","name":"aba7f675359847648cd2847cec918cfb"},{"type":"Edge","source_node_id":"0dde6ec0fe38464e8412324598ede70b","target_node_id":"13122e8165d1493fab7a2684c226429b","id":"a7ba93e7b08a4659ab957b6980e7b6e4"},{"type":"Edge","source_node_id":"13122e8165d1493fab7a2684c226429b","target_node_id":"7de15885b47e42c08c61846dadc5d855","id":"018a3094e52f4ada86dda16bf0e2b63a"},{"type":"Edge","source_node_id":"7de15885b47e42c08c61846dadc5d855","target_node_id":"4192299b76df475cb82ebc377873183a","id":"33b7ea7e992248ddb97d4d7ffec5d8c9"},{"type":"Edge","source_node_id":"b08f224f8d514eed84358ab89efd4ec2","target_node_id":"406a7d46d71c4c09a5fc659def14c375","id":"e943742a498e468f852c1a9eef5e3360"},{"type":"Edge","source_node_id":"406a7d46d71c4c09a5fc659def14c375","target_node_id":"dde8c95e9218412bbb1ac3185ea3d2c2","id":"acf1c1b59b564ac39a640daeea9845b7"},{"type":"Edge","source_node_id":"dde8c95e9218412bbb1ac3185ea3d2c2","target_node_id":"0dde6ec0fe38464e8412324598ede70b","branch_id":"869deef8585b43b383ef4ea8e4c777d3","id":"01546736242c42e699a70e4346989ca9","name":"869deef8585b43b383ef4ea8e4c777d3"},{"type":"Edge","source_node_id":"dde8c95e9218412bbb1ac3185ea3d2c2","target_node_id":"4192299b76df475cb82ebc377873183a","branch_id":"ddf855d5d9754f0682ab770d075bebf3","id":"d68a8ed9fbff4346b86263c01bb4c55d","name":"ddf855d5d9754f0682ab770d075bebf3"},{"type":"Edge","source_node_id":"dde8c95e9218412bbb1ac3185ea3d2c2","target_node_id":"67057a9a56864f77acf9f65850ec7f03","branch_id":"2d63d46f56104767927f1325b4864f76","id":"2b89ff0b0f484edda5a3511a3d8b3dc6","name":"2d63d46f56104767927f1325b4864f76"},{"type":"Edge","source_node_id":"67057a9a56864f77acf9f65850ec7f03","target_node_id":"acdd2db75a2a470b8f49f45c4605b074","id":"da6ed06e5d0648958903f3bc0c8c76cf"},{"type":"Edge","source_node_id":"acdd2db75a2a470b8f49f45c4605b074","target_node_id":"7de15885b47e42c08c61846dadc5d855","id":"ac18982e8301430da2367285282dec0c"},{"type":"Edge","source_node_id":"7d66b794fe5740bdb50b20f699cadb5c","target_node_id":"8bcc5516b896460db07500ed2fdf640f","id":"011db121e7b84902871bf776c094b2c7"},{"type":"Edge","source_node_id":"7f89394ff793434eba00a43959c032dd","target_node_id":"14f3f21ad4564309ba281041be212490","branch_id":"75da608b23b948b685048318e1e63a8c","id":"9be5d233599d49a8b9c7718de0030efe","name":"75da608b23b948b685048318e1e63a8c"},{"type":"Edge","source_node_id":"14f3f21ad4564309ba281041be212490","target_node_id":"3e4bf549c90946719e1ebf7efa4a0afb","id":"a8d793254d6046568bd3c84de2b0c660"},{"type":"Edge","source_node_id":"3e4bf549c90946719e1ebf7efa4a0afb","target_node_id":"7d66b794fe5740bdb50b20f699cadb5c","branch_id":"1d2005b87a9941e294eaad3cbce0dc5f","id":"0898aca772c34cd5b26f068aac5c30da","name":"1d2005b87a9941e294eaad3cbce0dc5f"},{"type":"Edge","source_node_id":"3e4bf549c90946719e1ebf7efa4a0afb","target_node_id":"8b2800a1a5f542f18399960b68a63941","branch_id":"21ca456c91ca481c90e42c55020a5b65","id":"2e7d8a349b514d0597adba81f32525a1","name":"21ca456c91ca481c90e42c55020a5b65"},{"type":"Edge","source_node_id":"8b2800a1a5f542f18399960b68a63941","target_node_id":"460af881fb7243f3b6b030a99962f240","id":"edbaec41f7ca43a4af63b398d3c0e764"},{"type":"Edge","source_node_id":"460af881fb7243f3b6b030a99962f240","target_node_id":"6c0e6fa231dd492ca595e729810a9980","id":"2d30307062394706a762813a6fbb3929"}],"id":"f2239226139844a48e40acdda3ec007e"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"86bd0ab91db9493784be7ab4edea5d1b"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"db148f0ae0ff4f82b7d3d756028c3096","name":"needit_type"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Reference","table":"x_58872_needit_needit","id":"7096069abd7b48d3b541c449fe7dafd0","name":"needit_list"},{"type":"True/False","id":"b22df4e5bafd4282b93ae10f3409500e","name":"search_again"},{"type":"Date/Time","mode":"date","id":"fdca89c7989f4a3ab854f54d90d82400","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"ee4cd55bdb3246a0adca3efe5c60c1d6","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short description","element":"short_description"},{"name":"When needed","element":"when_needed"},{"name":"Nothing","element":"nothing"}],"id":"11f5da82058d4bf4ab86a0e3cb4ebc1e","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"aa1899d79eb24796997eeca55132072c"},{"type":"Reference","table":"","id":"2cd8e2fda3aa415b9fbd864656c9de98","name":"change_short_description"}],"roles":[],"scope":"637a32aa4fbe330072e34f00a310c731","id":"c05bb2aa4fbe330072e34f00a310c72f","name":"_PRVW__c58b5beef7fe3300a24b7059865c360a","key_phrases":["Update NeedIt Records","NeedIt request"]}</design_definition>
        <design_topic_id>c05bb2aa4fbe330072e34f00a310c72f</design_topic_id>
        <name>_PRVW__c58b5beef7fe3300a24b7059865c360a</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-07-25 18:03:52</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>c18b5bee4ffe330072e34f00a310c70e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_381168_needit_vi">637a32aa4fbe330072e34f00a310c731</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">637a32aa4fbe330072e34f00a310c731</sys_scope>
        <sys_update_name>sys_cb_design_topic_c18b5bee4ffe330072e34f00a310c70e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-07-25 18:03:52</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
